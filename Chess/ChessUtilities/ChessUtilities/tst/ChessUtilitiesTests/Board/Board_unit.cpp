#include <ChessUtilities/Board/Board.hpp>

#include <gtest/gtest.h>

using namespace std;

namespace {

static alba::chess::Board::PieceGrid emptyGrid{
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0};

static alba::chess::Board::PieceGrid gridWithBW{
    0xC, 0xA, 0xB, 0xD, 0xE, 0xB, 0xA, 0xC, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
    0x0, 0x0, 0x0, 0x0, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x4, 0x2, 0x3, 0x5, 0x6, 0x3, 0x2, 0x4};

static alba::chess::Board::PieceGrid gridWithWB{
    0x4, 0x2, 0x3, 0x6, 0x5, 0x3, 0x2, 0x4, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
    0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
    0x0, 0x0, 0x0, 0x0, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0xC, 0xA, 0xB, 0xE, 0xD, 0xB, 0xA, 0xC};

static alba::chess::Board::PieceGrid gridFullOfWhitePawns{
    0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1,
    0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1,
    0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1};

}  // namespace

namespace alba::chess {

TEST(BoardTest, GetOrientationWorks) {
    Board const boardWithBW(BoardOrientation::BlackUpWhiteDown);
    Board const boardWithWB(BoardOrientation::WhiteUpBlackDown);

    EXPECT_EQ(BoardOrientation::BlackUpWhiteDown, boardWithBW.getOrientation());
    EXPECT_EQ(BoardOrientation::WhiteUpBlackDown, boardWithWB.getOrientation());
}

TEST(BoardTest, ConstructionWorks) {
    Board const boardDefaultConstructed;
    Board const boardConstructedWithOrientation(BoardOrientation::BlackUpWhiteDown);
    Board const boardConstructedWithOrientationAndPieceGrid(
        BoardOrientation::WhiteUpBlackDown,
        {0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1,
         0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1,
         0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1});

    EXPECT_EQ(BoardOrientation::Unknown, boardDefaultConstructed.getOrientation());
    EXPECT_EQ(emptyGrid, boardDefaultConstructed.getPieceGrid());
    EXPECT_EQ(BoardOrientation::BlackUpWhiteDown, boardConstructedWithOrientation.getOrientation());
    EXPECT_EQ(gridWithBW, boardConstructedWithOrientation.getPieceGrid());
    EXPECT_EQ(BoardOrientation::WhiteUpBlackDown, boardConstructedWithOrientationAndPieceGrid.getOrientation());
    EXPECT_EQ(gridFullOfWhitePawns, boardConstructedWithOrientationAndPieceGrid.getPieceGrid());
}

TEST(BoardTest, SetOrientationWorks) {
    Board boardWithBW;
    EXPECT_EQ(BoardOrientation::Unknown, boardWithBW.getOrientation());

    boardWithBW.setOrientation(BoardOrientation::WhiteUpBlackDown);

    EXPECT_EQ(BoardOrientation::WhiteUpBlackDown, boardWithBW.getOrientation());
}

TEST(BoardTest, GetCoordinateFromAlgebraicNotationWorks) {
    Board const boardWithBW(BoardOrientation::BlackUpWhiteDown);
    Board const boardWithWB(BoardOrientation::WhiteUpBlackDown);

    Coordinate const coordinate1(boardWithBW.getCoordinateFromAlgebraicNotation("c2"));
    Coordinate const coordinate2(boardWithWB.getCoordinateFromAlgebraicNotation("c2"));

    EXPECT_EQ((Coordinate{2, 6}), coordinate1);
    EXPECT_EQ((Coordinate{5, 1}), coordinate2);
}

TEST(BoardTest, GetExchangeAtWorksOnExample1) {
    Board const board(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0xE, 0xD, 0x0, 0x0, 0x0, 0xC, 0xA, 0xB, 0x0, 0x0, 0xB, 0xA, 0xC, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0,
         0x1, 0x0, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x9, 0x9, 0x0, 0x0, 0x9, 0x9, 0x0, 0x0, 0x0, 0x0, 0x9, 0x9,
         0x0, 0x0, 0x9, 0x9, 0x4, 0x2, 0x3, 0x0, 0x0, 0x3, 0x2, 0x4, 0x0, 0x0, 0x0, 0x6, 0x5, 0x0, 0x0, 0x0});

    // White pieces
    EXPECT_EQ(Exchange(0, 0), board.getExchangeAt({0, 2}));
    EXPECT_EQ(Exchange(0, 0), board.getExchangeAt({2, 2}));
    EXPECT_EQ(Exchange(0, 0), board.getExchangeAt({4, 2}));
    EXPECT_EQ(Exchange(0, 0), board.getExchangeAt({6, 2}));
    EXPECT_EQ(Exchange(-1, 1), board.getExchangeAt({5, 3}));
    EXPECT_EQ(Exchange(-1, 1), board.getExchangeAt({7, 3}));
    EXPECT_EQ(Exchange(-2, 2), board.getExchangeAt({1, 6}));
    EXPECT_EQ(Exchange(-2, 2), board.getExchangeAt({2, 6}));
    EXPECT_EQ(Exchange(-2, 2), board.getExchangeAt({5, 6}));
    EXPECT_EQ(Exchange(-2, 2), board.getExchangeAt({6, 6}));
    EXPECT_EQ(Exchange(-5, 1), board.getExchangeAt({7, 6}));

    // Black pieces
    EXPECT_EQ(Exchange(0, 0), board.getExchangeAt({2, 5}));
    EXPECT_EQ(Exchange(0, 0), board.getExchangeAt({3, 5}));
    EXPECT_EQ(Exchange(0, 0), board.getExchangeAt({6, 5}));
    EXPECT_EQ(Exchange(-1, 1), board.getExchangeAt({7, 5}));
    EXPECT_EQ(Exchange(-1, 1), board.getExchangeAt({0, 4}));
    EXPECT_EQ(Exchange(-1, 1), board.getExchangeAt({4, 4}));
    EXPECT_EQ(Exchange(-3, 1), board.getExchangeAt({1, 1}));
    EXPECT_EQ(Exchange(-3, 1), board.getExchangeAt({5, 1}));
    EXPECT_EQ(Exchange(-5, 1), board.getExchangeAt({0, 1}));
    EXPECT_EQ(Exchange(-5, 1), board.getExchangeAt({7, 1}));
}

TEST(BoardTest, GetExchangeAtWorksOnExample2) {
    Board const board(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x4, 0x0, 0x0, 0x0, 0x6, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x1, 0x1, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0,
         0x0, 0x0, 0x0, 0xB, 0x0, 0x9, 0x1, 0x1, 0x5, 0x2, 0x9, 0x0, 0x0, 0x0, 0x9, 0x9, 0x0, 0x0, 0xC, 0x0, 0x9, 0x0,
         0x0, 0x0, 0x9, 0x0, 0x0, 0x9, 0x0, 0x3, 0x0, 0x0, 0xD, 0x9, 0x0, 0x0, 0x0, 0x0, 0xC, 0xE, 0x0, 0x0});

    // White pieces
    EXPECT_EQ(Exchange(-9, 1), board.getExchangeAt({6, 3}));
    EXPECT_EQ(Exchange(-3, 1), board.getExchangeAt({3, 6}));

    // Black pieces
    EXPECT_EQ(Exchange(-1, 3), board.getExchangeAt({5, 4}));
    EXPECT_EQ(Exchange(-2, 2), board.getExchangeAt({4, 7}));
}

TEST(BoardTest, GetExchangeAtWorksOnExample3) {
    Board const board(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x4, 0x0, 0x0, 0x0, 0x6, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x1, 0x1, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0,
         0x0, 0x0, 0x0, 0xB, 0x0, 0x9, 0x1, 0x1, 0x5, 0x2, 0x9, 0x0, 0x0, 0x0, 0x9, 0x9, 0x0, 0x0, 0xC, 0x0, 0x9, 0x0,
         0xD, 0x0, 0x9, 0x0, 0x0, 0x9, 0x0, 0x3, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0xC, 0xE, 0x0, 0x0});

    // White pieces
    EXPECT_EQ(Exchange(-9, 1), board.getExchangeAt({6, 3}));
    EXPECT_EQ(Exchange(-3, 1), board.getExchangeAt({3, 6}));

    // Black pieces
    EXPECT_EQ(Exchange(0, 2), board.getExchangeAt({5, 4}));
    EXPECT_EQ(Exchange(-6, 2), board.getExchangeAt({4, 5}));
    EXPECT_EQ(Exchange(-2, 2), board.getExchangeAt({4, 7}));
}

TEST(BoardTest, GetExchangeAtWorksOnExample4) {
    Board const board(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x4, 0x0, 0x0, 0x0, 0x0, 0x6, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0xC, 0x1, 0x1, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0,
         0x0, 0x0, 0x0, 0xB, 0x0, 0x9, 0x1, 0x0, 0x5, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xC, 0x0, 0x9, 0x0,
         0x0, 0xD, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0xE, 0x0, 0x0});

    // White pieces
    EXPECT_EQ(Exchange(-1, 1), board.getExchangeAt({2, 1}));

    // Black pieces
    EXPECT_EQ(Exchange(0, 0), board.getExchangeAt({5, 1}));
}

TEST(BoardTest, GetExchangeAtWorksOnExample5) {
    Board const board(
        BoardOrientation::BlackUpWhiteDown,
        {0xC, 0x0, 0x0, 0x0, 0xE, 0x0, 0x0, 0xC, 0x0, 0xB, 0xD, 0xA, 0x0, 0x9, 0x9, 0x0, 0x9, 0xB, 0x0, 0x9, 0x9, 0x0,
         0x0, 0x9, 0x0, 0x9, 0x0, 0x0, 0x0, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x3, 0x0, 0x2, 0x1, 0x5,
         0x0, 0x0, 0x0, 0x0, 0x1, 0x1, 0x0, 0x0, 0x0, 0x1, 0x1, 0x1, 0x0, 0x0, 0x0, 0x4, 0x4, 0x0, 0x6, 0x0});

    // White pieces
    EXPECT_EQ(Exchange(-1, 1), board.getExchangeAt({6, 1}));

    // Black pieces
    EXPECT_EQ(Exchange(-2, 2), board.getExchangeAt({5, 3}));
}

TEST(BoardTest, GetMoveUsingUciNotationWorks) {
    Board const boardWithBW(BoardOrientation::BlackUpWhiteDown);
    Board const boardWithWB(BoardOrientation::WhiteUpBlackDown);

    EXPECT_EQ(Move({2, 6}, {2, 4}), boardWithBW.getMoveUsingUciNotation("c2c4"));
    EXPECT_EQ(Move({5, 1}, {5, 3}), boardWithWB.getMoveUsingUciNotation("c2c4"));
}

TEST(BoardTest, GetMoveUsingAlgebraicNotationWorks) {
    // Source test values: https://en.wikipedia.org/wiki/Algebraic_notation_(chess)#PGN
    Board board(BoardOrientation::BlackUpWhiteDown);

    ASSERT_EQ(Move({6, 7}, {5, 5}), board.getMoveUsingAlgebraicNotation("Nf3", PieceColor::White));
    board.move({{6, 7}, {5, 5}});
    ASSERT_EQ(Move({6, 0}, {5, 2}), board.getMoveUsingAlgebraicNotation("Nf6", PieceColor::Black));
    board.move({{6, 0}, {5, 2}});
    ASSERT_EQ(Move({2, 6}, {2, 4}), board.getMoveUsingAlgebraicNotation("c4", PieceColor::White));
    board.move({{2, 6}, {2, 4}});
    ASSERT_EQ(Move({6, 1}, {6, 2}), board.getMoveUsingAlgebraicNotation("g6", PieceColor::Black));
    board.move({{6, 1}, {6, 2}});
    ASSERT_EQ(Move({1, 7}, {2, 5}), board.getMoveUsingAlgebraicNotation("Nc3", PieceColor::White));
    board.move({{1, 7}, {2, 5}});
    ASSERT_EQ(Move({5, 0}, {6, 1}), board.getMoveUsingAlgebraicNotation("Bg7", PieceColor::Black));
    board.move({{5, 0}, {6, 1}});
    ASSERT_EQ(Move({3, 6}, {3, 4}), board.getMoveUsingAlgebraicNotation("d4", PieceColor::White));
    board.move({{3, 6}, {3, 4}});
    ASSERT_EQ(Move({4, 0}, {6, 0}), board.getMoveUsingAlgebraicNotation("O-O", PieceColor::Black));
    board.move({{4, 0}, {6, 0}});
    ASSERT_EQ(Move({2, 7}, {5, 4}), board.getMoveUsingAlgebraicNotation("Bf4", PieceColor::White));
    board.move({{2, 7}, {5, 4}});
    ASSERT_EQ(Move({3, 1}, {3, 3}), board.getMoveUsingAlgebraicNotation("d5", PieceColor::Black));
    board.move({{3, 1}, {3, 3}});
    ASSERT_EQ(Move({3, 7}, {1, 5}), board.getMoveUsingAlgebraicNotation("Qb3", PieceColor::White));
    board.move({{3, 7}, {1, 5}});
    ASSERT_EQ(Move({3, 3}, {2, 4}), board.getMoveUsingAlgebraicNotation("dxc4", PieceColor::Black));
    board.move({{3, 3}, {2, 4}});
    ASSERT_EQ(Move({1, 5}, {2, 4}), board.getMoveUsingAlgebraicNotation("Qxc4", PieceColor::White));
    board.move({{1, 5}, {2, 4}});
    ASSERT_EQ(Move({2, 1}, {2, 2}), board.getMoveUsingAlgebraicNotation("c6", PieceColor::Black));
    board.move({{2, 1}, {2, 2}});
    ASSERT_EQ(Move({4, 6}, {4, 4}), board.getMoveUsingAlgebraicNotation("e4", PieceColor::White));
    board.move({{4, 6}, {4, 4}});
    ASSERT_EQ(Move({1, 0}, {3, 1}), board.getMoveUsingAlgebraicNotation("Nbd7", PieceColor::Black));
    board.move({{1, 0}, {3, 1}});
}

TEST(BoardTest, GetMoveUsingAlgebraicNotationWorksAndItsNotConfusedWithBFileAndBishop) {
    // Source test values: https://en.wikipedia.org/wiki/Algebraic_notation_(chess)#PGN
    Board board(BoardOrientation::BlackUpWhiteDown);

    ASSERT_EQ(Move({4, 6}, {4, 4}), board.getMoveUsingAlgebraicNotation("e4", PieceColor::White));
    board.move({{4, 6}, {4, 4}});
    ASSERT_EQ(Move({1, 1}, {1, 2}), board.getMoveUsingAlgebraicNotation("b6", PieceColor::Black));
    board.move({{1, 1}, {1, 2}});
}

TEST(BoardTest, GetMoveUsingAlgebraicNotationWorksAndItsNotCapturingTheSameColorPieces) {
    // Source test values: https://en.wikipedia.org/wiki/Algebraic_notation_(chess)#PGN
    Board board(BoardOrientation::BlackUpWhiteDown);

    ASSERT_EQ(Move({5, 6}, {5, 5}), board.getMoveUsingAlgebraicNotation("f3", PieceColor::White));
    board.move({{5, 6}, {5, 5}});
    ASSERT_EQ(Move({3, 1}, {3, 2}), board.getMoveUsingAlgebraicNotation("d6", PieceColor::Black));
    board.move({{3, 1}, {3, 2}});
    ASSERT_EQ(Move({0, 0}, {0, 0}), board.getMoveUsingAlgebraicNotation("Nf3", PieceColor::White));
}

TEST(BoardTest, GetMoveUsingAlgebraicNotationWorksAndItsWorkingWithCheck) {
    // Source test values: https://en.wikipedia.org/wiki/Algebraic_notation_(chess)#PGN
    Board board(BoardOrientation::BlackUpWhiteDown);

    ASSERT_EQ(Move({4, 6}, {4, 4}), board.getMoveUsingAlgebraicNotation("e4", PieceColor::White));
    board.move({{4, 6}, {4, 4}});
    ASSERT_EQ(Move({4, 1}, {4, 3}), board.getMoveUsingAlgebraicNotation("e5", PieceColor::Black));
    board.move({{4, 1}, {4, 3}});
    ASSERT_EQ(Move({5, 6}, {5, 4}), board.getMoveUsingAlgebraicNotation("f4", PieceColor::White));
    board.move({{5, 6}, {5, 4}});
    ASSERT_EQ(Move({3, 0}, {7, 4}), board.getMoveUsingAlgebraicNotation("Qh4+", PieceColor::Black));
}

TEST(BoardTest, GetMovesFromThisWorksOnOneStepPawnNonCapture) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9});

    Moves const expectedMovesAtTheBottom{{{7, 7}, {7, 6}}};
    Moves const expectedMovesAtTheTop{{{0, 0}, {0, 1}}};
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithBW.getMovesFromThis({7, 7}));
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithWB.getMovesFromThis({7, 7}));
    EXPECT_EQ(expectedMovesAtTheTop, boardWithBW.getMovesFromThis({0, 0}));
    EXPECT_EQ(expectedMovesAtTheTop, boardWithWB.getMovesFromThis({0, 0}));
}

TEST(BoardTest, GetMovesFromThisWorksOnTwoStepsPawnNonCapture) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});

    Moves const expectedMovesAtTheBottom{{{7, 6}, {7, 5}}, {{7, 6}, {7, 4}}};
    Moves const expectedMovesAtTheTop{{{0, 1}, {0, 2}}, {{0, 1}, {0, 3}}};
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithBW.getMovesFromThis({7, 6}));
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithWB.getMovesFromThis({7, 6}));
    EXPECT_EQ(expectedMovesAtTheTop, boardWithBW.getMovesFromThis({0, 1}));
    EXPECT_EQ(expectedMovesAtTheTop, boardWithWB.getMovesFromThis({0, 1}));
}

TEST(BoardTest, GetMovesFromThisWorksOnPawnCapture) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x1, 0x1, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x9, 0x9, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x9, 0x9, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x1, 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});

    Moves const expectedMovesAtTheBottom{{{6, 6}, {5, 5}}, {{6, 6}, {7, 5}}};
    Moves const expectedMovesAtTheTop{{{1, 1}, {0, 2}}, {{1, 1}, {2, 2}}};
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithBW.getMovesFromThis({6, 6}));
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithWB.getMovesFromThis({6, 6}));
    EXPECT_EQ(expectedMovesAtTheTop, boardWithBW.getMovesFromThis({1, 1}));
    EXPECT_EQ(expectedMovesAtTheTop, boardWithWB.getMovesFromThis({1, 1}));
}

TEST(BoardTest, GetMovesFromThisWorksOnPawnMoves) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x1, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x9, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x9, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x1, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});

    Moves const expectedMovesAtTheBottom{{{6, 6}, {6, 5}}, {{6, 6}, {6, 4}}, {{6, 6}, {5, 5}}, {{6, 6}, {7, 5}}};
    Moves const expectedMovesAtTheTop{{{1, 1}, {1, 2}}, {{1, 1}, {1, 3}}, {{1, 1}, {0, 2}}, {{1, 1}, {2, 2}}};
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithBW.getMovesFromThis({6, 6}));
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithWB.getMovesFromThis({6, 6}));
    EXPECT_EQ(expectedMovesAtTheTop, boardWithBW.getMovesFromThis({1, 1}));
    EXPECT_EQ(expectedMovesAtTheTop, boardWithWB.getMovesFromThis({1, 1}));
}

TEST(BoardTest, GetMovesFromThisWorksOnKnightMoves) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0xA, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xA, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0});

    Moves const expectedMovesAtTheBottom{{{6, 6}, {4, 5}}, {{6, 6}, {5, 4}}, {{6, 6}, {7, 4}}};
    Moves const expectedMovesAtTheTop{{{1, 1}, {0, 3}}, {{1, 1}, {2, 3}}, {{1, 1}, {3, 2}}};
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithBW.getMovesFromThis({6, 6}));
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithWB.getMovesFromThis({6, 6}));
    EXPECT_EQ(expectedMovesAtTheTop, boardWithBW.getMovesFromThis({1, 1}));
    EXPECT_EQ(expectedMovesAtTheTop, boardWithWB.getMovesFromThis({1, 1}));
}

TEST(BoardTest, GetMovesFromThisWorksOnBishopMoves) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xB, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x3, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0xB, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0});

    Moves const expectedMovesAtTheBottom{{{5, 5}, {4, 4}}, {{5, 5}, {3, 3}}, {{5, 5}, {2, 2}}, {{5, 5}, {4, 6}},
                                         {{5, 5}, {3, 7}}, {{5, 5}, {6, 4}}, {{5, 5}, {6, 6}}, {{5, 5}, {7, 7}}};
    Moves const expectedMovesAtTheTop{{{2, 2}, {1, 1}}, {{2, 2}, {0, 0}}, {{2, 2}, {1, 3}}, {{2, 2}, {3, 1}},
                                      {{2, 2}, {4, 0}}, {{2, 2}, {3, 3}}, {{2, 2}, {4, 4}}, {{2, 2}, {5, 5}}};
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithBW.getMovesFromThis({5, 5}));
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithWB.getMovesFromThis({5, 5}));
    EXPECT_EQ(expectedMovesAtTheTop, boardWithBW.getMovesFromThis({2, 2}));
    EXPECT_EQ(expectedMovesAtTheTop, boardWithWB.getMovesFromThis({2, 2}));
}

TEST(BoardTest, GetMovesFromThisWorksOnRookMoves) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0xC, 0x0, 0x9, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1,
         0x0, 0x4, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x4, 0x0, 0x1, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9,
         0x0, 0xC, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});

    Moves const expectedMovesAtTheBottom{{{5, 5}, {5, 4}}, {{5, 5}, {5, 6}}, {{5, 5}, {5, 7}},
                                         {{5, 5}, {4, 5}}, {{5, 5}, {6, 5}}, {{5, 5}, {7, 5}}};
    Moves const expectedMovesAtTheTop{{{2, 2}, {2, 1}}, {{2, 2}, {2, 0}}, {{2, 2}, {2, 3}},
                                      {{2, 2}, {1, 2}}, {{2, 2}, {0, 2}}, {{2, 2}, {3, 2}}};
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithBW.getMovesFromThis({5, 5}));
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithWB.getMovesFromThis({5, 5}));
    EXPECT_EQ(expectedMovesAtTheTop, boardWithBW.getMovesFromThis({2, 2}));
    EXPECT_EQ(expectedMovesAtTheTop, boardWithWB.getMovesFromThis({2, 2}));
}

TEST(BoardTest, GetMovesFromThisWorksOnQueenMoves) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0xD, 0x0, 0x9, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x1, 0x9, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1,
         0x0, 0x5, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x5, 0x0, 0x1, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x9, 0x1, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9,
         0x0, 0xD, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0});

    Moves const expectedMovesAtTheBottom{{{5, 5}, {4, 4}}, {{5, 5}, {3, 3}}, {{5, 5}, {2, 2}}, {{5, 5}, {4, 6}},
                                         {{5, 5}, {3, 7}}, {{5, 5}, {6, 4}}, {{5, 5}, {6, 6}}, {{5, 5}, {7, 7}},
                                         {{5, 5}, {5, 4}}, {{5, 5}, {5, 6}}, {{5, 5}, {5, 7}}, {{5, 5}, {4, 5}},
                                         {{5, 5}, {6, 5}}, {{5, 5}, {7, 5}}};
    Moves const expectedMovesAtTheTop{{{2, 2}, {1, 1}}, {{2, 2}, {0, 0}}, {{2, 2}, {1, 3}}, {{2, 2}, {3, 1}},
                                      {{2, 2}, {4, 0}}, {{2, 2}, {3, 3}}, {{2, 2}, {4, 4}}, {{2, 2}, {5, 5}},
                                      {{2, 2}, {2, 1}}, {{2, 2}, {2, 0}}, {{2, 2}, {2, 3}}, {{2, 2}, {1, 2}},
                                      {{2, 2}, {0, 2}}, {{2, 2}, {3, 2}}};
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithBW.getMovesFromThis({5, 5}));
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithWB.getMovesFromThis({5, 5}));
    EXPECT_EQ(expectedMovesAtTheTop, boardWithBW.getMovesFromThis({2, 2}));
    EXPECT_EQ(expectedMovesAtTheTop, boardWithWB.getMovesFromThis({2, 2}));
}

TEST(BoardTest, GetMovesFromThisWorksOnKingOneStepMoves) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0xE, 0x9, 0x0, 0x0, 0x0, 0x0, 0xC, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x4, 0x0, 0x0, 0x0, 0x0, 0x1, 0x6, 0x0});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x6, 0x1, 0x0, 0x0, 0x0, 0x0, 0x4, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0xC, 0x0, 0x0, 0x0, 0x0, 0x9, 0xE, 0x0});

    Moves const expectedMovesAtTheBottom{{{6, 7}, {5, 6}}, {{6, 7}, {6, 6}}};
    Moves const expectedMovesAtTheTop{{{1, 0}, {1, 1}}, {{1, 0}, {2, 1}}};
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithBW.getMovesFromThis({6, 7}));
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithWB.getMovesFromThis({6, 7}));
    EXPECT_EQ(expectedMovesAtTheTop, boardWithBW.getMovesFromThis({1, 0}));
    EXPECT_EQ(expectedMovesAtTheTop, boardWithWB.getMovesFromThis({1, 0}));
}

TEST(BoardTest, GetMovesFromThisWorksOnKingOneStepMovesWithCheck) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xE, 0x0, 0x4, 0x0, 0x0, 0x0, 0x0, 0x5, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x6, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});

    Moves const expectedMovesAtTheBottom{{{6, 0}, {7, 0}}};
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithBW.getMovesFromThis({6, 0}));
}

TEST(BoardTest, GetMovesFromThisWorksOnKingMovesWithCastling) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0xC, 0x0, 0x0, 0x0, 0xE, 0x0, 0x0, 0xC, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x4, 0x0, 0x0, 0x0, 0x6, 0x0, 0x0, 0x4});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x4, 0x0, 0x0, 0x6, 0x0, 0x0, 0x0, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xC, 0x0, 0x0, 0xE, 0x0, 0x0, 0x0, 0xC});

    Moves const expectedMovesAtTheBottomOfBW{{{4, 7}, {3, 6}}, {{4, 7}, {3, 7}}, {{4, 7}, {4, 6}}, {{4, 7}, {5, 6}},
                                             {{4, 7}, {5, 7}}, {{4, 7}, {2, 7}}, {{4, 7}, {6, 7}}};
    Moves const expectedMovesAtTheBottomOfWB{{{3, 7}, {2, 6}}, {{3, 7}, {2, 7}}, {{3, 7}, {3, 6}}, {{3, 7}, {4, 6}},
                                             {{3, 7}, {4, 7}}, {{3, 7}, {1, 7}}, {{3, 7}, {5, 7}}};
    Moves const expectedMovesAtTheTopOfBW{{{4, 0}, {3, 0}}, {{4, 0}, {3, 1}}, {{4, 0}, {4, 1}}, {{4, 0}, {5, 0}},
                                          {{4, 0}, {5, 1}}, {{4, 0}, {2, 0}}, {{4, 0}, {6, 0}}};
    Moves const expectedMovesAtTheTopOfWB{{{3, 0}, {2, 0}}, {{3, 0}, {2, 1}}, {{3, 0}, {3, 1}}, {{3, 0}, {4, 0}},
                                          {{3, 0}, {4, 1}}, {{3, 0}, {1, 0}}, {{3, 0}, {5, 0}}};
    EXPECT_EQ(expectedMovesAtTheBottomOfBW, boardWithBW.getMovesFromThis({4, 7}));
    EXPECT_EQ(expectedMovesAtTheBottomOfWB, boardWithWB.getMovesFromThis({3, 7}));
    EXPECT_EQ(expectedMovesAtTheTopOfBW, boardWithBW.getMovesFromThis({4, 0}));
    EXPECT_EQ(expectedMovesAtTheTopOfWB, boardWithWB.getMovesFromThis({3, 0}));
}

TEST(BoardTest, GetMovesFromThisWorksOnKingMovesWithNoCastlingDueToBlocking) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0xC, 0x0, 0x9, 0x0, 0xE, 0x0, 0x1, 0xC, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x4, 0x0, 0x1, 0x0, 0x6, 0x0, 0x9, 0x4});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x4, 0x1, 0x0, 0x6, 0x0, 0x9, 0x0, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xC, 0x9, 0x0, 0xE, 0x0, 0x1, 0x0, 0xC});

    Moves const expectedMovesAtTheBottomOfBW{
        {{4, 7}, {3, 6}}, {{4, 7}, {3, 7}}, {{4, 7}, {4, 6}}, {{4, 7}, {5, 6}}, {{4, 7}, {5, 7}}};
    Moves const expectedMovesAtTheBottomOfWB{
        {{3, 7}, {2, 6}}, {{3, 7}, {2, 7}}, {{3, 7}, {3, 6}}, {{3, 7}, {4, 6}}, {{3, 7}, {4, 7}}};
    Moves const expectedMovesAtTheTopOfBW{
        {{4, 0}, {3, 0}}, {{4, 0}, {3, 1}}, {{4, 0}, {4, 1}}, {{4, 0}, {5, 0}}, {{4, 0}, {5, 1}}};
    Moves const expectedMovesAtTheTopOfWB{
        {{3, 0}, {2, 0}}, {{3, 0}, {2, 1}}, {{3, 0}, {3, 1}}, {{3, 0}, {4, 0}}, {{3, 0}, {4, 1}}};
    EXPECT_EQ(expectedMovesAtTheBottomOfBW, boardWithBW.getMovesFromThis({4, 7}));
    EXPECT_EQ(expectedMovesAtTheBottomOfWB, boardWithWB.getMovesFromThis({3, 7}));
    EXPECT_EQ(expectedMovesAtTheTopOfBW, boardWithBW.getMovesFromThis({4, 0}));
    EXPECT_EQ(expectedMovesAtTheTopOfWB, boardWithWB.getMovesFromThis({3, 0}));
}

TEST(BoardTest, GetMovesToThisWorksOnOneAndTwoStepPawnNonCapture) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});

    Moves const expectedMovesAtTheBottomOneStep{{{7, 6}, {7, 5}}};
    Moves const expectedMovesAtTheBottomTwoStep{{{7, 6}, {7, 4}}};
    Moves const expectedMovesAtTheTopOneStep{{{0, 1}, {0, 2}}};
    Moves const expectedMovesAtTheTopTwoStep{{{0, 1}, {0, 3}}};
    EXPECT_EQ(expectedMovesAtTheBottomOneStep, boardWithBW.getMovesToThis({7, 5}, PieceColor::White));
    EXPECT_EQ(expectedMovesAtTheBottomOneStep, boardWithWB.getMovesToThis({7, 5}, PieceColor::Black));
    EXPECT_EQ(expectedMovesAtTheBottomTwoStep, boardWithBW.getMovesToThis({7, 4}, PieceColor::White));
    EXPECT_EQ(expectedMovesAtTheBottomTwoStep, boardWithWB.getMovesToThis({7, 4}, PieceColor::Black));
    EXPECT_EQ(expectedMovesAtTheTopOneStep, boardWithBW.getMovesToThis({0, 2}, PieceColor::Black));
    EXPECT_EQ(expectedMovesAtTheTopOneStep, boardWithWB.getMovesToThis({0, 2}, PieceColor::White));
    EXPECT_EQ(expectedMovesAtTheTopTwoStep, boardWithBW.getMovesToThis({0, 3}, PieceColor::Black));
    EXPECT_EQ(expectedMovesAtTheTopTwoStep, boardWithWB.getMovesToThis({0, 3}, PieceColor::White));
}

TEST(BoardTest, GetMovesToThisWorksOnPawnCapture) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x1, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x9, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x9, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});

    Moves const expectedMovesAtTheBottom{{{6, 6}, {5, 5}}};
    Moves const expectedMovesAtTheTop{{{1, 1}, {2, 2}}};
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithBW.getMovesToThis({5, 5}, PieceColor::White));
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithWB.getMovesToThis({5, 5}, PieceColor::Black));
    EXPECT_TRUE(boardWithBW.getMovesToThis({7, 5}, PieceColor::White).empty());
    EXPECT_TRUE(boardWithWB.getMovesToThis({7, 5}, PieceColor::Black).empty());
    EXPECT_EQ(expectedMovesAtTheTop, boardWithBW.getMovesToThis({2, 2}, PieceColor::Black));
    EXPECT_EQ(expectedMovesAtTheTop, boardWithWB.getMovesToThis({2, 2}, PieceColor::White));
    EXPECT_TRUE(boardWithBW.getMovesToThis({0, 2}, PieceColor::Black).empty());
    EXPECT_TRUE(boardWithWB.getMovesToThis({0, 2}, PieceColor::White).empty());
}

TEST(BoardTest, GetMovesToThisWorksOnPawnEnPassant) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x9, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x1, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});

    Moves const expectedMovesAtTheTop{{{2, 3}, {1, 2}}};
    Moves const expectedMovesAtTheBottom{{{5, 4}, {6, 5}}};
    EXPECT_TRUE(boardWithBW.getMovesToThis({3, 1}, PieceColor::White).empty());
    EXPECT_TRUE(boardWithBW.getMovesToThis({1, 1}, PieceColor::White).empty());
    EXPECT_TRUE(boardWithBW.getMovesToThis({3, 2}, PieceColor::White).empty());
    EXPECT_EQ(expectedMovesAtTheTop, boardWithBW.getMovesToThis({1, 2}, PieceColor::White));
    EXPECT_TRUE(boardWithWB.getMovesToThis({3, 1}, PieceColor::Black).empty());
    EXPECT_TRUE(boardWithWB.getMovesToThis({1, 1}, PieceColor::Black).empty());
    EXPECT_TRUE(boardWithWB.getMovesToThis({3, 2}, PieceColor::Black).empty());
    EXPECT_EQ(expectedMovesAtTheTop, boardWithWB.getMovesToThis({1, 2}, PieceColor::Black));

    EXPECT_TRUE(boardWithBW.getMovesToThis({4, 6}, PieceColor::Black).empty());
    EXPECT_TRUE(boardWithBW.getMovesToThis({6, 6}, PieceColor::Black).empty());
    EXPECT_TRUE(boardWithBW.getMovesToThis({4, 5}, PieceColor::Black).empty());
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithBW.getMovesToThis({6, 5}, PieceColor::Black));
    EXPECT_TRUE(boardWithWB.getMovesToThis({4, 6}, PieceColor::White).empty());
    EXPECT_TRUE(boardWithWB.getMovesToThis({6, 6}, PieceColor::White).empty());
    EXPECT_TRUE(boardWithWB.getMovesToThis({4, 5}, PieceColor::White).empty());
    EXPECT_EQ(expectedMovesAtTheBottom, boardWithWB.getMovesToThis({6, 5}, PieceColor::White));
}

TEST(BoardTest, GetMovesToThisWorksOnKnightMoves) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0xA, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xA, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0});

    Moves const expectedMovesAtTheBottomWithEmptySpace{{{6, 6}, {4, 5}}};
    Moves const expectedMovesAtTheBottomWithOpponentsPiece{{{6, 6}, {7, 4}}};
    Moves const expectedMovesAtTheTopWithEmptySpace{{{1, 1}, {3, 2}}};
    Moves const expectedMovesAtTheTopWithOpponentsPiece{{{1, 1}, {0, 3}}};
    EXPECT_EQ(expectedMovesAtTheBottomWithEmptySpace, boardWithBW.getMovesToThis({4, 5}, PieceColor::White));
    EXPECT_EQ(expectedMovesAtTheBottomWithEmptySpace, boardWithWB.getMovesToThis({4, 5}, PieceColor::Black));
    EXPECT_EQ(expectedMovesAtTheBottomWithOpponentsPiece, boardWithBW.getMovesToThis({7, 4}, PieceColor::White));
    EXPECT_EQ(expectedMovesAtTheBottomWithOpponentsPiece, boardWithWB.getMovesToThis({7, 4}, PieceColor::Black));
    EXPECT_TRUE(boardWithBW.getMovesToThis({5, 7}, PieceColor::White).empty());
    EXPECT_TRUE(boardWithWB.getMovesToThis({5, 7}, PieceColor::Black).empty());
    EXPECT_EQ(expectedMovesAtTheTopWithEmptySpace, boardWithBW.getMovesToThis({3, 2}, PieceColor::Black));
    EXPECT_EQ(expectedMovesAtTheTopWithEmptySpace, boardWithWB.getMovesToThis({3, 2}, PieceColor::White));
    EXPECT_EQ(expectedMovesAtTheTopWithOpponentsPiece, boardWithBW.getMovesToThis({0, 3}, PieceColor::Black));
    EXPECT_EQ(expectedMovesAtTheTopWithOpponentsPiece, boardWithWB.getMovesToThis({0, 3}, PieceColor::White));
    EXPECT_TRUE(boardWithBW.getMovesToThis({3, 0}, PieceColor::Black).empty());
    EXPECT_TRUE(boardWithWB.getMovesToThis({3, 0}, PieceColor::White).empty());
}

TEST(BoardTest, GetMovesToThisWorksOnBishopMoves) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xB, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x3, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0xB, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0});

    Moves const expectedMovesAtTheBottomWithEmptySpace{{{5, 5}, {7, 7}}};
    Moves const expectedMovesAtTheBottomWithOpponentsPiece{{{5, 5}, {3, 7}}};
    Moves const expectedMovesAtTheTopWithEmptySpace{{{2, 2}, {0, 0}}};
    Moves const expectedMovesAtTheTopWithOpponentsPiece{{{2, 2}, {4, 0}}};
    EXPECT_EQ(expectedMovesAtTheBottomWithEmptySpace, boardWithBW.getMovesToThis({7, 7}, PieceColor::White));
    EXPECT_EQ(expectedMovesAtTheBottomWithEmptySpace, boardWithWB.getMovesToThis({7, 7}, PieceColor::Black));
    EXPECT_EQ(expectedMovesAtTheBottomWithOpponentsPiece, boardWithBW.getMovesToThis({3, 7}, PieceColor::White));
    EXPECT_EQ(expectedMovesAtTheBottomWithOpponentsPiece, boardWithWB.getMovesToThis({3, 7}, PieceColor::Black));
    EXPECT_TRUE(boardWithBW.getMovesToThis({7, 3}, PieceColor::White).empty());
    EXPECT_TRUE(boardWithWB.getMovesToThis({7, 3}, PieceColor::Black).empty());
    EXPECT_EQ(expectedMovesAtTheTopWithEmptySpace, boardWithBW.getMovesToThis({0, 0}, PieceColor::Black));
    EXPECT_EQ(expectedMovesAtTheTopWithEmptySpace, boardWithWB.getMovesToThis({0, 0}, PieceColor::White));
    EXPECT_EQ(expectedMovesAtTheTopWithOpponentsPiece, boardWithBW.getMovesToThis({4, 0}, PieceColor::Black));
    EXPECT_EQ(expectedMovesAtTheTopWithOpponentsPiece, boardWithWB.getMovesToThis({4, 0}, PieceColor::White));
    EXPECT_TRUE(boardWithBW.getMovesToThis({0, 4}, PieceColor::Black).empty());
    EXPECT_TRUE(boardWithWB.getMovesToThis({0, 4}, PieceColor::White).empty());
}

TEST(BoardTest, GetMovesToThisWorksOnRookMoves) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0xC, 0x0, 0x9, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1,
         0x0, 0x4, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x4, 0x0, 0x1, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9,
         0x0, 0xC, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});

    Moves const expectedMovesAtTheBottomWithEmptySpace{{{5, 5}, {5, 7}}};
    Moves const expectedMovesAtTheBottomWithOpponentsPiece{{{5, 5}, {7, 5}}};
    Moves const expectedMovesAtTheTopWithEmptySpace{{{2, 2}, {2, 0}}};
    Moves const expectedMovesAtTheTopWithOpponentsPiece{{{2, 2}, {0, 2}}};
    EXPECT_EQ(expectedMovesAtTheBottomWithEmptySpace, boardWithBW.getMovesToThis({5, 7}, PieceColor::White));
    EXPECT_EQ(expectedMovesAtTheBottomWithEmptySpace, boardWithWB.getMovesToThis({5, 7}, PieceColor::Black));
    EXPECT_EQ(expectedMovesAtTheBottomWithOpponentsPiece, boardWithBW.getMovesToThis({7, 5}, PieceColor::White));
    EXPECT_EQ(expectedMovesAtTheBottomWithOpponentsPiece, boardWithWB.getMovesToThis({7, 5}, PieceColor::Black));
    EXPECT_TRUE(boardWithBW.getMovesToThis({3, 5}, PieceColor::White).empty());
    EXPECT_TRUE(boardWithWB.getMovesToThis({3, 5}, PieceColor::Black).empty());
    EXPECT_EQ(expectedMovesAtTheTopWithEmptySpace, boardWithBW.getMovesToThis({2, 0}, PieceColor::Black));
    EXPECT_EQ(expectedMovesAtTheTopWithEmptySpace, boardWithWB.getMovesToThis({2, 0}, PieceColor::White));
    EXPECT_EQ(expectedMovesAtTheTopWithOpponentsPiece, boardWithBW.getMovesToThis({0, 2}, PieceColor::Black));
    EXPECT_EQ(expectedMovesAtTheTopWithOpponentsPiece, boardWithWB.getMovesToThis({0, 2}, PieceColor::White));
    EXPECT_TRUE(boardWithBW.getMovesToThis({4, 2}, PieceColor::Black).empty());
    EXPECT_TRUE(boardWithWB.getMovesToThis({4, 2}, PieceColor::White).empty());
}

TEST(BoardTest, GetMovesToThisWorksOnQueenMoves) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x1, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xD, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x5, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x9});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x9, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x5, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0xD, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x1});

    Moves const expectedMovesAtTheBottomWithEmptySpace{{{5, 5}, {7, 5}}};
    Moves const expectedMovesAtTheBottomWithOpponentsPiece{{{5, 5}, {7, 7}}};
    Moves const expectedMovesAtTheTopWithEmptySpace{{{2, 2}, {0, 2}}};
    Moves const expectedMovesAtTheTopWithOpponentsPiece{{{2, 2}, {0, 0}}};
    EXPECT_EQ(expectedMovesAtTheBottomWithEmptySpace, boardWithBW.getMovesToThis({7, 5}, PieceColor::White));
    EXPECT_EQ(expectedMovesAtTheBottomWithEmptySpace, boardWithWB.getMovesToThis({7, 5}, PieceColor::Black));
    EXPECT_EQ(expectedMovesAtTheBottomWithOpponentsPiece, boardWithBW.getMovesToThis({7, 7}, PieceColor::White));
    EXPECT_EQ(expectedMovesAtTheBottomWithOpponentsPiece, boardWithWB.getMovesToThis({7, 7}, PieceColor::Black));
    EXPECT_TRUE(boardWithBW.getMovesToThis({5, 7}, PieceColor::White).empty());
    EXPECT_TRUE(boardWithWB.getMovesToThis({5, 7}, PieceColor::Black).empty());
    EXPECT_EQ(expectedMovesAtTheTopWithEmptySpace, boardWithBW.getMovesToThis({0, 2}, PieceColor::Black));
    EXPECT_EQ(expectedMovesAtTheTopWithEmptySpace, boardWithWB.getMovesToThis({0, 2}, PieceColor::White));
    EXPECT_EQ(expectedMovesAtTheTopWithOpponentsPiece, boardWithBW.getMovesToThis({0, 0}, PieceColor::Black));
    EXPECT_EQ(expectedMovesAtTheTopWithOpponentsPiece, boardWithWB.getMovesToThis({0, 0}, PieceColor::White));
    EXPECT_TRUE(boardWithBW.getMovesToThis({2, 0}, PieceColor::Black).empty());
    EXPECT_TRUE(boardWithWB.getMovesToThis({2, 0}, PieceColor::White).empty());
}

TEST(BoardTest, GetMovesToThisWorksOnKingMoves) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0xE, 0xA, 0x0, 0x0, 0x0, 0x0, 0xC, 0x0, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xA, 0x0, 0x4, 0x0, 0x0, 0x0, 0x0, 0x2, 0x6, 0x0});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x6, 0x2, 0x0, 0x0, 0x0, 0x0, 0x4, 0x0, 0xA, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x0, 0xC, 0x0, 0x0, 0x0, 0x0, 0xA, 0xE, 0x0});

    Moves const expectedMovesAtTheBottomWithEmptySpace{{{6, 7}, {5, 6}}};
    Moves const expectedMovesAtTheBottomWithOpponentsPiece{{{6, 7}, {6, 6}}};
    Moves const expectedMovesAtTheTopWithEmptySpace{{{1, 0}, {2, 1}}};
    Moves const expectedMovesAtTheTopWithOpponentsPiece{{{1, 0}, {1, 1}}};
    EXPECT_EQ(expectedMovesAtTheBottomWithEmptySpace, boardWithBW.getMovesToThis({5, 6}, PieceColor::White));
    EXPECT_EQ(expectedMovesAtTheBottomWithEmptySpace, boardWithWB.getMovesToThis({5, 6}, PieceColor::Black));
    EXPECT_EQ(expectedMovesAtTheBottomWithOpponentsPiece, boardWithBW.getMovesToThis({6, 6}, PieceColor::White));
    EXPECT_EQ(expectedMovesAtTheBottomWithOpponentsPiece, boardWithWB.getMovesToThis({6, 6}, PieceColor::Black));
    EXPECT_TRUE(boardWithBW.getMovesToThis({5, 7}, PieceColor::White).empty());
    EXPECT_TRUE(boardWithWB.getMovesToThis({5, 7}, PieceColor::Black).empty());
    EXPECT_TRUE(boardWithBW.getMovesToThis({7, 7}, PieceColor::White).empty());
    EXPECT_TRUE(boardWithWB.getMovesToThis({7, 7}, PieceColor::Black).empty());
    EXPECT_EQ(expectedMovesAtTheTopWithEmptySpace, boardWithBW.getMovesToThis({2, 1}, PieceColor::Black));
    EXPECT_EQ(expectedMovesAtTheTopWithEmptySpace, boardWithWB.getMovesToThis({2, 1}, PieceColor::White));
    EXPECT_EQ(expectedMovesAtTheTopWithOpponentsPiece, boardWithBW.getMovesToThis({1, 1}, PieceColor::Black));
    EXPECT_EQ(expectedMovesAtTheTopWithOpponentsPiece, boardWithWB.getMovesToThis({1, 1}, PieceColor::White));
    EXPECT_TRUE(boardWithBW.getMovesToThis({2, 0}, PieceColor::Black).empty());
    EXPECT_TRUE(boardWithWB.getMovesToThis({2, 0}, PieceColor::White).empty());
    EXPECT_TRUE(boardWithBW.getMovesToThis({0, 0}, PieceColor::Black).empty());
    EXPECT_TRUE(boardWithWB.getMovesToThis({0, 0}, PieceColor::White).empty());
}

TEST(BoardTest, GetPieceAtWorks) {
    Board const boardWithBW(BoardOrientation::BlackUpWhiteDown);
    Board const boardWithWB(BoardOrientation::WhiteUpBlackDown);

    EXPECT_EQ(Piece(PieceColorAndType::BlackRook), boardWithBW.getPieceAt({0, 0}));
    EXPECT_EQ(Piece(PieceColorAndType::WhiteRook), boardWithBW.getPieceAt({7, 7}));
    EXPECT_EQ(Piece(PieceColorAndType::Empty), boardWithBW.getPieceAt({3, 3}));
    EXPECT_EQ(Piece(PieceColorAndType::Empty), boardWithBW.getPieceAt({4, 4}));
    EXPECT_EQ(Piece(PieceColorAndType::WhiteRook), boardWithWB.getPieceAt({0, 0}));
    EXPECT_EQ(Piece(PieceColorAndType::BlackRook), boardWithWB.getPieceAt({7, 7}));
    EXPECT_EQ(Piece(PieceColorAndType::Empty), boardWithWB.getPieceAt({3, 3}));
    EXPECT_EQ(Piece(PieceColorAndType::Empty), boardWithWB.getPieceAt({4, 4}));
}

TEST(BoardTest, GetPieceGridWorks) {
    Board const boardWithBW(BoardOrientation::BlackUpWhiteDown);
    Board const boardWithWB(BoardOrientation::WhiteUpBlackDown);

    EXPECT_EQ(gridWithBW, boardWithBW.getPieceGrid());
    EXPECT_EQ(gridWithWB, boardWithWB.getPieceGrid());
}

TEST(BoardTest, SetPieceAtWorks) {
    Board boardWithBW;

    boardWithBW.setPieceAt({7, 7}, Piece(PieceColorAndType::WhitePawn));

    Board::PieceGrid const emptyGridWithOneWhitePawn(
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1});
    EXPECT_EQ(emptyGridWithOneWhitePawn, boardWithBW.getPieceGrid());
}

TEST(BoardTest, MoveWorksForWhitePawnMovingTwoSpaces) {
    Board boardWithBW(BoardOrientation::BlackUpWhiteDown);

    boardWithBW.move({{2, 6}, {2, 4}});

    Board::PieceGrid const expectedGrid(
        {0xC, 0xA, 0xB, 0xD, 0xE, 0xB, 0xA, 0xC, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x1, 0x1, 0x0, 0x1, 0x1, 0x1, 0x1, 0x1, 0x4, 0x2, 0x3, 0x5, 0x6, 0x3, 0x2, 0x4});
    EXPECT_EQ(expectedGrid, boardWithBW.getPieceGrid());
}

TEST(BoardTest, MoveWorksForWhiteRookCapturingABlackPawn) {
    Board board(
        BoardOrientation::BlackUpWhiteDown,
        {0xC, 0xA, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0xB, 0x0, 0x0, 0x0, 0x9, 0x9, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0xC,
         0x2, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x1, 0x4, 0x0, 0x0, 0x0, 0x0, 0x4, 0x6, 0x0});

    board.move({{5, 7}, {5, 1}});

    Board::PieceGrid const expectedGrid(
        {0xC, 0xA, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0xB, 0x0, 0x0, 0x0, 0x4, 0x9, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0xC,
         0x2, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x1, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x6, 0x0});
    EXPECT_EQ(expectedGrid, board.getPieceGrid());
}

TEST(BoardTest, MoveWorksForWhitePawnCapturingABlackBishop) {
    Board board(
        BoardOrientation::BlackUpWhiteDown,
        {0xC, 0x0, 0x0, 0x0, 0x0, 0x0, 0xE, 0x0, 0x9, 0x9, 0x0, 0xB, 0x0, 0x9, 0x9, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x9, 0x0, 0x1, 0x0, 0x0, 0x0, 0x5, 0x0, 0x0, 0xD, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0,
         0xB, 0x0, 0x0, 0x1, 0x1, 0x1, 0x0, 0x0, 0x0, 0x1, 0x1, 0x0, 0x4, 0x0, 0x0, 0x0, 0x2, 0x0, 0x6, 0x0});

    board.move({{5, 6}, {4, 5}});

    Board::PieceGrid const expectedGrid(
        {0xC, 0x0, 0x0, 0x0, 0x0, 0x0, 0xE, 0x0, 0x9, 0x9, 0x0, 0xB, 0x0, 0x9, 0x9, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x9, 0x0, 0x1, 0x0, 0x0, 0x0, 0x5, 0x0, 0x0, 0xD, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0,
         0x1, 0x0, 0x0, 0x1, 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x4, 0x0, 0x0, 0x0, 0x2, 0x0, 0x6, 0x0});
    EXPECT_EQ(expectedGrid, board.getPieceGrid());
}

TEST(BoardTest, MoveWorksWithCastling) {
    Board board(
        BoardOrientation::BlackUpWhiteDown,
        {0xC, 0xA, 0xB, 0xD, 0xE, 0xB, 0xA, 0xC, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x4, 0x0, 0x0, 0x0, 0x6, 0x3, 0x2, 0x4});

    board.move({{4, 7}, {2, 7}});

    Board::PieceGrid const expectedGrid(
        {0xC, 0xA, 0xB, 0xD, 0xE, 0xB, 0xA, 0xC, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x0, 0x0, 0x6, 0x4, 0x0, 0x3, 0x2, 0x4});
    EXPECT_EQ(expectedGrid, board.getPieceGrid());
}

TEST(BoardTest, MoveWorksWithEnPassant) {
    Board board(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x9, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});

    board.move({{2, 3}, {1, 2}});
    board.move({{5, 4}, {6, 5}});

    Board::PieceGrid const expectedGrid(
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x1, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x9, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});
    EXPECT_EQ(expectedGrid, board.getPieceGrid());
}

TEST(BoardTest, GetAlgebraicNotationOfCoordinateWorks) {
    Board const boardWithBW(BoardOrientation::BlackUpWhiteDown);
    Board const boardWithWB(BoardOrientation::WhiteUpBlackDown);

    string const letterNumber1(boardWithBW.getAlgebraicNotationOfCoordinate({4, 4}));
    string const letterNumber2(boardWithWB.getAlgebraicNotationOfCoordinate({4, 4}));

    EXPECT_EQ("e4", letterNumber1);
    EXPECT_EQ("d5", letterNumber2);
}

TEST(BoardTest, GetReadableStringOfMoveWorks) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xC, 0xA, 0xB, 0xE, 0xD, 0xB, 0xA, 0xC, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1,
         0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x9, 0x9, 0x9,
         0x9, 0x9, 0x9, 0x9, 0x4, 0x2, 0x3, 0x6, 0x5, 0x3, 0x2, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});

    EXPECT_EQ("King d7->c8", boardWithBW.getReadableStringOfMove({{3, 1}, {2, 0}}));
}

TEST(BoardTest, GetNotationPartOfFenStringWorks) {
    Board const boardWithBW(BoardOrientation::BlackUpWhiteDown);
    Board const boardWithWB(BoardOrientation::WhiteUpBlackDown);
    Board const board1(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0xE, 0xD, 0x0, 0x0, 0x0, 0xC, 0xA, 0xB, 0x0, 0x0, 0xB, 0xA, 0xC, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0,
         0x1, 0x0, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x0, 0x1, 0x9, 0x9, 0x0, 0x0, 0x9, 0x9, 0x0, 0x0, 0x0, 0x0, 0x9, 0x9,
         0x0, 0x0, 0x9, 0x9, 0x4, 0x2, 0x3, 0x0, 0x0, 0x3, 0x2, 0x4, 0x0, 0x0, 0x0, 0x6, 0x5, 0x0, 0x0, 0x0});
    Board const board2(
        BoardOrientation::WhiteUpBlackDown,
        {0x4, 0x0, 0x3, 0x6, 0x5, 0x3, 0x0, 0x4, 0x1, 0x1, 0x1, 0x0, 0x1, 0x1, 0x1, 0x1, 0x0, 0x0, 0x2, 0x0, 0x0, 0x2,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xA, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x9, 0x0, 0x0, 0x0, 0x9, 0x9, 0x9, 0x9, 0x0, 0x9, 0x9, 0x9, 0xC, 0xA, 0xB, 0xE, 0xD, 0xB, 0x0, 0xC});

    EXPECT_EQ("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR", boardWithBW.getNotationPartOfFenString());
    EXPECT_EQ("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR", boardWithWB.getNotationPartOfFenString());
    EXPECT_EQ("3kq3/rnb2bnr/P1P1P1P1/1P1P1P1P/pp2pp2/2pp2pp/RNB2BNR/3KQ3", board1.getNotationPartOfFenString());
    EXPECT_EQ("r1bqkbnr/ppp1pppp/3p4/4n3/4P3/2N2N2/PPPP1PPP/R1BQKB1R", board2.getNotationPartOfFenString());
}

TEST(BoardTest, GetCastlingPartOfFenStringWorks) {
    Board const boardWithBW(BoardOrientation::BlackUpWhiteDown);
    Board const boardWithWB(BoardOrientation::WhiteUpBlackDown);
    Board const board1(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0xA, 0xB, 0xD, 0xE, 0xB, 0xA, 0xC, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x4, 0x2, 0x3, 0x5, 0x6, 0x3, 0x2, 0x0});
    Board const board2(
        BoardOrientation::WhiteUpBlackDown,
        {0x4, 0x2, 0x3, 0x6, 0x5, 0x3, 0x2, 0x0, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x0, 0xA, 0xB, 0xE, 0xD, 0xB, 0xA, 0xC});

    EXPECT_EQ("KQkq", boardWithBW.getCastlingPartOfFenString());
    EXPECT_EQ("KQkq", boardWithWB.getCastlingPartOfFenString());
    EXPECT_EQ("Qk", board1.getCastlingPartOfFenString());
    EXPECT_EQ("Kq", board2.getCastlingPartOfFenString());
}

TEST(BoardTest, IsEmptyWorks) {
    Board const boardWithBW(BoardOrientation::BlackUpWhiteDown);

    EXPECT_TRUE(boardWithBW.isEmptyAt({4, 4}));
    EXPECT_FALSE(boardWithBW.isEmptyAt({3, 6}));
}

TEST(BoardTest, IsACaptureMoveWorks) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xB, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});

    EXPECT_TRUE(boardWithBW.isACaptureMove({{2, 2}, {5, 5}}));
    EXPECT_TRUE(boardWithBW.isACaptureMove({{5, 5}, {2, 2}}));
    EXPECT_FALSE(boardWithBW.isACaptureMove({{2, 2}, {0, 0}}));
    EXPECT_FALSE(boardWithBW.isACaptureMove({{5, 5}, {7, 7}}));
}

TEST(BoardTest, IsAPromotionMoveWorks) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});

    EXPECT_TRUE(boardWithBW.isAPromotionMove({{1, 1}, {1, 0}}));
    EXPECT_FALSE(boardWithBW.isAPromotionMove({{2, 2}, {2, 1}}));
}

TEST(BoardTest, IsACastlingMoveWorks) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0xA, 0xB, 0xD, 0xE, 0xB, 0xA, 0xC, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x1, 0x4, 0x2, 0x3, 0x5, 0x6, 0x3, 0x2, 0x0});

    EXPECT_FALSE(boardWithBW.isACastlingMove({{4, 0}, {2, 0}}));
    EXPECT_TRUE(boardWithBW.isACastlingMove({{4, 0}, {6, 0}}));
    EXPECT_TRUE(boardWithBW.isACastlingMove({{4, 7}, {2, 7}}));
    EXPECT_FALSE(boardWithBW.isACastlingMove({{4, 7}, {6, 7}}));
}

TEST(BoardTest, IsAPossibleMoveWorksOnOneAndTwoStepPawnNonCapture) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0xA, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xA, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});

    // one step (bottom)
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{7, 6}, {7, 5}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{7, 6}, {7, 5}}));

    // two step (bottom)
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{7, 6}, {7, 4}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{7, 6}, {7, 4}}));

    // three step (bottom)
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{7, 6}, {7, 3}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{7, 6}, {7, 3}}));

    // one step with blocking (bottom)
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{5, 6}, {5, 5}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{5, 6}, {5, 5}}));

    // two step with blocking (bottom)
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{5, 6}, {5, 4}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{5, 6}, {5, 4}}));

    // one step (top)
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{0, 1}, {0, 2}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{0, 1}, {0, 2}}));

    // two step (top)
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{0, 1}, {0, 3}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{0, 1}, {0, 3}}));

    // three step (top)
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{0, 1}, {0, 4}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{0, 1}, {0, 4}}));

    // one step with blocking (top)
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{2, 1}, {2, 2}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{2, 1}, {2, 2}}));

    // two step with blocking (top)
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{2, 1}, {2, 3}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{2, 1}, {2, 3}}));
}

TEST(BoardTest, IsAPossibleMoveWorksOnPawnCapture) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x1, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x9, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x9, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x1, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});

    EXPECT_TRUE(boardWithBW.isAPossibleMove({{6, 6}, {5, 5}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{6, 6}, {5, 5}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{6, 6}, {7, 5}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{6, 6}, {7, 5}}));
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{1, 1}, {2, 2}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{1, 1}, {2, 2}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{1, 1}, {0, 2}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{1, 1}, {0, 2}}));
}

TEST(BoardTest, IsAPossibleMoveWorksOnEnPassant) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x9, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x1, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});

    EXPECT_FALSE(boardWithBW.isAPossibleMove({{2, 2}, {3, 1}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{2, 2}, {1, 1}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{2, 3}, {3, 2}}));
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{2, 3}, {1, 2}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{5, 5}, {4, 6}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{5, 5}, {6, 6}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{5, 4}, {4, 5}}));
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{5, 4}, {6, 5}}));

    EXPECT_FALSE(boardWithWB.isAPossibleMove({{2, 2}, {3, 1}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{2, 2}, {1, 1}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{2, 3}, {3, 2}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{2, 3}, {1, 2}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{5, 5}, {4, 6}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{5, 5}, {6, 6}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{5, 4}, {4, 5}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{5, 4}, {6, 5}}));
}

TEST(BoardTest, IsAPossibleMoveWorksOnKnightMoves) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0xA, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xA, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0});

    EXPECT_TRUE(boardWithBW.isAPossibleMove({{6, 6}, {4, 5}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{6, 6}, {4, 5}}));
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{6, 6}, {7, 4}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{6, 6}, {7, 4}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{6, 6}, {5, 7}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{6, 6}, {5, 7}}));
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{1, 1}, {3, 2}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{1, 1}, {3, 2}}));
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{1, 1}, {0, 3}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{1, 1}, {0, 3}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{1, 1}, {3, 0}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{1, 1}, {3, 0}}));
}

TEST(BoardTest, IsAPossibleMoveWorksOnBishopMoves) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xB, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x3, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0xB, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0});

    EXPECT_TRUE(boardWithBW.isAPossibleMove({{5, 5}, {7, 7}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{5, 5}, {7, 7}}));
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{5, 5}, {3, 7}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{5, 5}, {3, 7}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{5, 5}, {7, 3}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{5, 5}, {7, 3}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{5, 5}, {1, 1}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{5, 5}, {1, 1}}));
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{2, 2}, {0, 0}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{2, 2}, {0, 0}}));
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{2, 2}, {4, 0}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{2, 2}, {4, 0}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{2, 2}, {0, 4}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{2, 2}, {0, 4}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{2, 2}, {6, 6}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{2, 2}, {6, 6}}));
}

TEST(BoardTest, IsAPossibleMoveWorksOnRookMoves) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0xC, 0x0, 0x9, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1,
         0x0, 0x4, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x4, 0x0, 0x1, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9,
         0x0, 0xC, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});

    EXPECT_TRUE(boardWithBW.isAPossibleMove({{5, 5}, {5, 7}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{5, 5}, {5, 7}}));
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{5, 5}, {7, 5}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{5, 5}, {7, 5}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{5, 5}, {3, 5}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{5, 5}, {3, 5}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{5, 5}, {2, 5}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{5, 5}, {2, 5}}));
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{2, 2}, {2, 0}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{2, 2}, {2, 0}}));
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{2, 2}, {0, 2}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{2, 2}, {0, 2}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{2, 2}, {4, 2}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{2, 2}, {4, 2}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{2, 2}, {5, 2}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{2, 2}, {5, 2}}));
}

TEST(BoardTest, IsAPossibleMoveWorksOnQueenMoves) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x1, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xD, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x5, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x9});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x9, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x5, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0xD, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x1});

    EXPECT_TRUE(boardWithBW.isAPossibleMove({{5, 5}, {7, 5}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{5, 5}, {7, 5}}));
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{5, 5}, {7, 7}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{5, 5}, {7, 7}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{5, 5}, {5, 7}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{5, 5}, {5, 7}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{5, 5}, {1, 1}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{5, 5}, {1, 1}}));
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{2, 2}, {0, 2}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{2, 2}, {0, 2}}));
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{2, 2}, {0, 0}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{2, 2}, {0, 0}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{2, 2}, {2, 0}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{2, 2}, {2, 0}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{2, 2}, {6, 6}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{2, 2}, {6, 6}}));
}

TEST(BoardTest, IsAPossibleMoveWorksOnKingOneStepMoves) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0xE, 0xA, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xA, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x6});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x6, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xA, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xA, 0xE});

    EXPECT_TRUE(boardWithBW.isAPossibleMove({{7, 7}, {6, 6}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{7, 7}, {6, 6}}));
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{7, 7}, {7, 6}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{7, 7}, {7, 6}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{7, 7}, {6, 7}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{7, 7}, {6, 7}}));
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{0, 0}, {1, 1}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{0, 0}, {1, 1}}));
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{0, 0}, {0, 1}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{0, 0}, {0, 1}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{0, 0}, {1, 0}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{0, 0}, {1, 0}}));
}

TEST(BoardTest, IsAPossibleMoveWorksOnKingCastlingMoves) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0xC, 0x0, 0x0, 0x0, 0xE, 0x0, 0x0, 0xC, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x4, 0x0, 0x0, 0x0, 0x6, 0x0, 0x1, 0x4});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x4, 0x0, 0x0, 0x6, 0x0, 0x0, 0x0, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xB, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xC, 0x0, 0x0, 0xE, 0x0, 0x0, 0x9, 0xC});

    EXPECT_TRUE(boardWithBW.isAPossibleMove({{4, 0}, {2, 0}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{4, 0}, {6, 0}}));
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{4, 7}, {2, 7}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{4, 7}, {6, 7}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{3, 0}, {1, 0}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{3, 0}, {5, 0}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{3, 7}, {1, 7}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{3, 7}, {5, 7}}));
}

TEST(BoardTest, IsAPossibleMoveWorksOnKingCastlingMovesWithKingOnCheck) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0xC, 0x0, 0x0, 0x0, 0xE, 0x0, 0x0, 0xC, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xA, 0x0, 0x4, 0x0, 0x0, 0x0, 0x6, 0x0, 0x0, 0x4});
    Board const boardWithWB(
        BoardOrientation::WhiteUpBlackDown,
        {0x4, 0x0, 0x0, 0x6, 0x0, 0x0, 0x0, 0x4, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x2, 0x0, 0x0, 0xC, 0x0, 0x0, 0xE, 0x0, 0x0, 0x0, 0xC});

    EXPECT_TRUE(boardWithBW.isAPossibleMove({{4, 0}, {2, 0}}));
    EXPECT_TRUE(boardWithBW.isAPossibleMove({{4, 0}, {6, 0}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{4, 7}, {2, 7}}));
    EXPECT_FALSE(boardWithBW.isAPossibleMove({{4, 7}, {6, 7}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{3, 0}, {1, 0}}));
    EXPECT_TRUE(boardWithWB.isAPossibleMove({{3, 0}, {5, 0}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{3, 7}, {1, 7}}));
    EXPECT_FALSE(boardWithWB.isAPossibleMove({{3, 7}, {5, 7}}));
}

TEST(BoardTest, CanBeCapturedWorks) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});

    EXPECT_TRUE(boardWithBW.canBeCaptured({3, 3}));
    EXPECT_FALSE(boardWithBW.canBeCaptured({3, 4}));
    EXPECT_FALSE(boardWithBW.canBeCaptured({4, 3}));
    EXPECT_TRUE(boardWithBW.canBeCaptured({4, 4}));
    EXPECT_FALSE(boardWithBW.canBeCaptured({0, 0}));
    EXPECT_FALSE(boardWithBW.canBeCaptured({7, 7}));
}

TEST(BoardTest, AreThereAnyMovesToThisWorks) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});

    EXPECT_TRUE(boardWithBW.areThereAnyMovesToThis({3, 3}, PieceColor::White));
    EXPECT_FALSE(boardWithBW.areThereAnyMovesToThis({3, 4}, PieceColor::White));
    EXPECT_FALSE(boardWithBW.areThereAnyMovesToThis({4, 3}, PieceColor::Black));
    EXPECT_TRUE(boardWithBW.areThereAnyMovesToThis({4, 4}, PieceColor::Black));
    EXPECT_FALSE(boardWithBW.areThereAnyMovesToThis({0, 0}, PieceColor::White));
    EXPECT_FALSE(boardWithBW.areThereAnyMovesToThis({7, 7}, PieceColor::Black));
}

TEST(BoardTest, HasOnlyOneMoveToThisWorks) {
    Board const boardWithBW(
        BoardOrientation::BlackUpWhiteDown,
        {0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x9, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0,
         0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xA, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0});

    EXPECT_TRUE(boardWithBW.hasOnlyOneMoveToThis({3, 3}, PieceColor::White));
    EXPECT_FALSE(boardWithBW.hasOnlyOneMoveToThis({3, 4}, PieceColor::White));
    EXPECT_FALSE(boardWithBW.hasOnlyOneMoveToThis({4, 3}, PieceColor::Black));
    EXPECT_FALSE(boardWithBW.hasOnlyOneMoveToThis({4, 4}, PieceColor::Black));
    EXPECT_FALSE(boardWithBW.hasOnlyOneMoveToThis({0, 0}, PieceColor::White));
    EXPECT_FALSE(boardWithBW.hasOnlyOneMoveToThis({7, 7}, PieceColor::Black));
}

TEST(BoardTest, EqualOperatorWorks) {
    Board const boardWithBW(BoardOrientation::BlackUpWhiteDown);
    Board const boardWithWB(BoardOrientation::WhiteUpBlackDown);
    Board boardWithWrongOrientation(boardWithBW);
    boardWithWrongOrientation.setOrientation(BoardOrientation::WhiteUpBlackDown);
    Board boardWithOneWrongPiece(boardWithBW);
    boardWithOneWrongPiece.setPieceAt({3, 3}, Piece(PieceColorAndType::WhiteQueen));

    EXPECT_TRUE(boardWithBW.operator==(boardWithBW));
    EXPECT_FALSE(boardWithBW.operator==(boardWithWB));
    EXPECT_FALSE(boardWithBW.operator==(boardWithWrongOrientation));
    EXPECT_FALSE(boardWithBW.operator==(boardWithOneWrongPiece));
}

TEST(BoardTest, NotEqualOperatorWorks) {
    Board const boardWithBW(BoardOrientation::BlackUpWhiteDown);
    Board const boardWithWB(BoardOrientation::WhiteUpBlackDown);
    Board boardWithWrongOrientation(boardWithBW);
    boardWithWrongOrientation.setOrientation(BoardOrientation::WhiteUpBlackDown);
    Board boardWithOneWrongPiece(boardWithBW);
    boardWithOneWrongPiece.setPieceAt({3, 3}, Piece(PieceColorAndType::WhiteQueen));

    EXPECT_FALSE(boardWithBW.operator!=(boardWithBW));
    EXPECT_TRUE(boardWithBW.operator!=(boardWithWB));
    EXPECT_TRUE(boardWithBW.operator!=(boardWithWrongOrientation));
    EXPECT_TRUE(boardWithBW.operator!=(boardWithOneWrongPiece));
}

}  // namespace alba::chess
